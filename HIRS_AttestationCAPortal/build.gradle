plugins {
    id 'java'
    id 'war'
}

java {
    toolchain {
        languageVersion = JavaLanguageVersion.of(11)
    }
}

repositories {
    mavenCentral()
}

dependencies {
    implementation project(':HIRS_Utils')
    implementation project(':HIRS_AttestationCA')
    implementation libs.bouncy.castle
    implementation libs.servlet.api
    implementation libs.commons.io
    implementation libs.commons.lang
    implementation libs.commons.upload
    implementation libs.gson
    implementation libs.guava          // for com.google.common
    implementation libs.hibernate
    implementation libs.hibernate.validator
    implementation libs.http
    implementation libs.jstl
    implementation libs.javax.validation
    implementation libs.log4j2
    implementation libs.log4j2.web
    implementation libs.pci.ids
    implementation libs.servlet.api
    implementation libs.spring.context
    implementation libs.spring.jdbc
    implementation libs.spring.orm
    implementation libs.spring.transaction
    implementation libs.spring.webmvc
    implementation libs.lombok
    annotationProcessor libs.lombok
    testImplementation libs.hamcrest

    // override the servlet API for testing. Required for Spring Integration tests
    testImplementation libs.servlet.api
    testImplementation libs.hsqldb
    testImplementation libs.spring.test
    testImplementation libs.testng
    testImplementation libs.mockito
    testImplementation libs.testng
    testImplementation libs.jsonassert
    testImplementation libs.jsonpath
}

def copyVersion = project.task('copyVersion')
copyVersion.dependsOn compileJava
war.dependsOn copyVersion

war {
    from(buildDir) {
        include 'VERSION'
        into 'WEB-INF/classes'
    }
    archiveFileName = 'HIRS_AttestationCAPortal.war'
}

ext.configDir = new File(projectDir, 'config')

ext.checkstyleConfigDir = "$configDir/checkstyle"

ext.findbugsConfigDir = "$configDir/findbugs"
