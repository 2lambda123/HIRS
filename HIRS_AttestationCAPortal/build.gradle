plugins {
   apply plugin: 'java'
   apply plugin: 'war'
}

repositories {
    mavenCentral()
}

dependencies {
    implementation(project(':HIRS_Utils')) {
        exclude module: "javassist"
    }
    implementation(':HIRS_AttestationCA'))
    implementation  servlet.api
    implementation libs.commons.io
    implementation libs.commons.lang
    implementation libs.commons.upload
    implementation libs.gson
    implementation libs.guava          // for com.google.common
    implementation libs.hibernate
    implementation libs.http
    implementation libs.jstl
    implementation libs.log4j2
    implementation libs.log4j2.web
    implementation libs.pci.ids
    implementation libs.servlet-api
    implementation libs.spring.webmvc
    implementation libs.spring.context
    implementation libs.hibernatex-validator

    runtime fileTree(dir: 'build/plugins', include: ['*.jar'])

    testImplementation libs.hamcrest
    // override the servlet API for testing. Required for Spring Integration tests
    testImplementation servlet.api

    testImplementation libs.hsqldb
    testImplementation libs.spring.test
    testImplementation libs.testng
    testImplementation libs.mockito
    testImplementation libs.testng
    testImplementation libs.jsonassert

    testRuntime libs.jsonpath
}

def copyVersion = project.task('copyVersion')
copyVersion.dependsOn compileJava
war.dependsOn copyVersion
war.dependsOn addPlugins

war {
    from(buildDir) {
        include 'VERSION'
        into 'WEB-INF/classes'
    }
    archiveFileName = 'HIRS_AttestationCAPortal.war'
}

ext.configDir = new File(projectDir, 'config')

ext.checkstyleConfigDir = "$configDir/checkstyle"

ext.findbugsConfigDir = "$configDir/findbugs"

